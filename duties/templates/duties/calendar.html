{% extends 'duties/base.html' %}
{% load static django_bootstrap5 calendar_filters %}
{% block extrahead %}
  <link rel="stylesheet" type="text/css" href="{% static 'duties/css/calendar.css' %}">
{% endblock extrahead %}
{% block header %}
  <div class="header-wrapper">logo</div>
{% endblock %}
{% block main %}
  <div class="calendar-wrapper">
    {% for year_num, months in calendar.items %}
      <div class="year-num">{{ year_num }}</div>
      <div id="{{ year_num }}" class="year">
        {% for month in months %}
          <div class="month">
            {% with month_num=forloop.counter %}
              <div class="month-name">{{ month_num|month_name }}</div>
              <div class="month-weekdays">
                {% for weekday in weekheader %}
                  {# TODO Sunday weekday should be also red #}
                  <div class="weekday">{{ weekday }}</div>
                {% endfor %}
              </div>
              {% for week in month %}
                <div class="week">
                  {% for day in week %}
                    {% if day.month == month_num %}
                      {% if day.isoweekday == 7 %}  {# TODO Can this be done more accurate? #}
                        <div id="{{ day.isoformat }}" class="day sunday">{{ day.day }}</div>
                      {% else %}
                        <div id="{{ day.isoformat }}" class="day">{{ day.day }}</div>
                      {% endif %}
                    {% else %}
                      <div class="day">&nbsp</div>
                    {% endif %}
                  {% endfor %}
                </div>
              {% endfor %}
            {% endwith %}
          </div>
        {% endfor %}
      </div>
    {% endfor %}
  </div>
{% endblock main %}
